from pprint import pprint

import declxml as xml

from .serializers.document_1207_serializer import DocumentXML1207Serializer

s_xml = """<?xml version="1.0" encoding="UTF-8" ?>
<Header standart="1207" version="1.5" charset="UTF-8" time="2020-10-22T10:09:05Z" msg_type="1"
        msg_id="08F2A0DE-F7A9-421C-A61D-5FD2F7FC1C2C" msg_acknow="2" from_org_id="23455432"
        from_organization="Міністерство для тесту" from_sys_id="ecc37736-8da8-415c-85b6-d12a8fc3e62d"
        from_system="Мінтест" to_org_id="12341234" to_organization="СЕВ СЕД 2" to_sys_id="2c1e8ad0-3a19-41fb-9540-74b5189cca5e"
        to_system="СЕВ СЕД 2">
    <Document idnumber="08F2A0DE-F7A9-421C-A61D-5FD2F7FC1C2C" type="0" kind="Лист" annotation="ккфыв" collection="0"
              purpose_type="0" urgent="0">
        <RegNumber regdate="2020-10-22">ewrwerwer</RegNumber>
        <Confident flag="0"></Confident>
        <DocTransfer type="docx" char_set="UTF-8" description="тест.docx" idnumber="1625">
            aW1wb3J0IGJhc2U2NA0KaW1wb3J0IGhhc2hsaWINCg0KaW1wb3J0IHJlcXVlc3RzDQoNCnNhbHRfcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vc2V2MTguZGlyLmdvdi51YS9kaXIvcmVzdC9hdXRoL3NhbHQvZWNjMzc3MzYtOGRhOC00MTVjLTg1YjYtZDEyYThmYzNlNjJkJykNCnNhbHQgPSBzYWx0X3Jlc3BvbnNlLmNvbnRlbnQNCnByaW50KHNhbHQpDQoNCmRlZiBnZXRMb2dpbkRldGFpbHMocGFzc3dvcmQsIHNhbHQpOg0KICAgIHBhc3N3b3JkX2hhc2ggPSBoYXNobGliLm1kNShwYXNzd29yZC5lbmNvZGUoKSkNCiAgICBwYXNzd29yZF9hbmRfc2FsdCA9IHN0cihwYXNzd29yZF9oYXNoLmhleGRpZ2VzdCgpKSArIHN0cihzYWx0KVsyOi0xXQ0KICAgIHBhc3N3b3JkX2FuZF9zYWx0X2Jhc2U2NCA9IGJhc2U2NC5iNjRlbmNvZGUocGFzc3dvcmRfYW5kX3NhbHQuZW5jb2RlKCkpDQogICAgZGV0YWlscyA9IGJhc2U2NC5iNjRlbmNvZGUoaGFzaGxpYi5tZDUocGFzc3dvcmRfYW5kX3NhbHRfYmFzZTY0KS5oZXhkaWdlc3QoKS5lbmNvZGUoKSkNCiAgICByZXR1cm4gc3RyKGRldGFpbHMpWzI6LTFdDQoNCmRldGFpbHMgPSBnZXRMb2dpbkRldGFpbHMocGFzc3dvcmQ9IjA4YTNkMDZhLWNjYjYtNDQ2NS1iOGZhLTkzN2U3Mjc2YjQ0MiIsIHNhbHQ9c2FsdCkNCnByaW50KGRldGFpbHMpDQoNCmxvZ2luID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3NldjE4LmRpci5nb3YudWEvZGlyL3Jlc3QvYXV0aC9sb2dpbi9lY2MzNzczNi04ZGE4LTQxNWMtODViNi1kMTJhOGZjM2U2MmQiLA0KICAgICAgICAgICAgICAgICAgICAgcGFyYW1zPXsnZGV0YWlscyc6IGRldGFpbHN9KQ0KDQpwcmludChsb2dpbi5jb250ZW50KQ0K
        </DocTransfer>
        <Author>
            <Organization fullname="Міністерство для тесту" shortname="Мінтест" ogrn="23455432" inn="0">
                <Address country="Україна"></Address>
            </Organization>
            <OutNumber>
                <RegNumber regdate="2020-10-22">56+4687</RegNumber>
            </OutNumber>
        </Author>
        <Addressee type="0">
            <Organization fullname="СЕВ СЕД 2" shortname="СЕВ СЕД 2" ogrn="23455432" inn="0">
                <Address country="Україна"></Address>
            </Organization>
        </Addressee>
        <Writer>
            <Organization fullname="Міністерство для тесту" shortname="Мінтест" ogrn="23455432" inn="0">
                <Address country="Україна"></Address>
                <OfficialPerson>
                    <Name>Гомазков Денис</Name>
                    <Official department="" post="" separator=""></Official>
                </OfficialPerson>
            </Organization>
        </Writer>
    </Document>
    <Expansion organization="BMS Consulting" exp_ver="1.0">
        <StaticExpansion>
            <SignInfo docTransfer_idnumber="1625">
                <SigningTime>2020-10-22T10:08:53Z</SigningTime>
                <SignData>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
                </SignData>
            </SignInfo>
        </StaticExpansion>
    </Expansion>
</Header>"""
from lxml import etree

xml_schema_path = r'C:\Users\o.lec\PycharmProjects\sevsed2\apps\sevovvintegration\wsdl/Order1207_1 5_v.2.2.xsd'
#xml_test_path = '/home/geo/Documents/DIR/sed_server/sevsed2/apps/sevovvintegration/test_data/test_res.xml'
#xml_valid_path = '/home/geo/Documents/DIR/sed_server/sevsed2/apps/sevovvintegration/test_data/t3.xml'
print(xml_schema_path)
XML_SCHEMA = etree.XMLSchema(file=xml_schema_path)


def test():
    #res = xml.parse_from_string(DocumentXML1207Serializer, s_xml)
    # pprint(res)
    data = xml.parse_from_file(DocumentXML1207Serializer, r'C:\Users\o.lec\PycharmProjects\sevsed2\media\sevovv_integration\organization_1\outgoing\2020\11\13\34D39B22-BB84-4E7F-B425-87A138A55CE2.xml')
    pprint(data)
    # xml.serialize_to_file(DocumentXML1207Serializer, res, xml_test_path)
    xml_doc = etree.parse(r'C:\Users\o.lec\PycharmProjects\sevsed2\media\sevovv_integration\organization_1\outgoing\2020\11\13\34D39B22-BB84-4E7F-B425-87A138A55CE2.xml')
    result = XML_SCHEMA.assertValid(xml_doc)
    #xml_doc_valid = etree.parse(xml_valid_path)
    #result = XML_SCHEMA.validate(xml_doc_valid)
    print(result)


test()
